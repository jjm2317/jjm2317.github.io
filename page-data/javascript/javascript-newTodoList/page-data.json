{"componentChunkName":"component---src-templates-blog-post-js","path":"/javascript/javascript-newTodoList/","result":{"data":{"site":{"siteMetadata":{"title":"Jiman's Blog","author":"Jeong Jiman","siteUrl":"https://gatsby-starter-bee.netlify.com","comment":{"disqusShortName":"","utterances":"JaeYeopHan/gatsby-starter-bee"},"sponsor":{"buyMeACoffeeId":"jbee"}}},"markdownRemark":{"id":"44b093e8-d787-59a0-9d25-8e2e272694cf","excerpt":"TodoList 과제","html":"<h1 id=\"todolist-과제\" style=\"position:relative;\"><a href=\"#todolist-%EA%B3%BC%EC%A0%9C\" aria-label=\"todolist 과제 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TodoList 과제</h1>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">// State\nlet todos = [];\nlet data = [];\nconst $todos = document.querySelector(&#39;.todos&#39;);\nconst $input = document.querySelector(&#39;.input-todo&#39;);\nconst $addButton = document.querySelector(&#39;.add&#39;);\nconst $filter = document.querySelector(&#39;.nav&#39;);\nconst $clear = document.querySelector(&#39;.clear-completed&#39;);\nconst $todoCompleted = document.querySelector(&#39;.completed-todos&#39;);\nconst $todoActive = document.querySelector(&#39;.active-todos&#39;);\nconst $completeAll = document.querySelector(&#39;#ck-complete-all&#39;);\nconst fetchTodos = () =&gt; {\n  return  [\n{ id: 1, content: &#39;HTML&#39;, completed: false },\n{ id: 2, content: &#39;CSS&#39;, completed: true },\n{ id: 3, content: &#39;Javascript&#39;, completed: false }\n]\n};\n\nconst render = () =&gt; {\n  $todos.innerHTML = todos.map(({id, content, completed}) =&gt; {\n      return `&lt;li id=&quot;${id}&quot; class=&quot;todo-item&quot;&gt;\n      &lt;input id=&quot;ck-${id}&quot; class=&quot;checkbox&quot; type=&quot;checkbox&quot; ${completed ? &quot;checked&quot; : &#39;&#39;}&gt;\n      &lt;label for=&quot;ck-${id}&quot;&gt;${content}&lt;/label&gt;\n      &lt;i class=&quot;remove-todo far fa-times-circle&quot;&gt;&lt;/i&gt;\n    &lt;/li&gt;`\n  }).join(&#39;&#39;);\n  $todoCompleted.textContent = todos.filter(todo =&gt; todo.completed === true).length;\n  $todoActive.textContent = todos.filter(todo =&gt; todo.completed === false).length;\n}\nconst updateData = () =&gt;{\n  data = data.map(todo =&gt; {\n    const test = todos.find(item =&gt; todo.id === item.id);\n    return test ? {...todo, ...test} : {...todo}\n  })\n}\nconst findId = () =&gt; {\n  return Math.max(...todos.map(({id}) =&gt; id),0)+1;\n  updateData()\n}\n\nconst addTodo = (content) =&gt; {\n  const newTodo = {id: findId(), content, completed: false}\n  todos = [newTodo, ...todos];\n\n  data = [newTodo,...data];\n  updateData()\n  console.log(todos,data);\n}\n\nconst sortTodo = () =&gt; {\n  todos = todos.sort((a, b) =&gt; b.id - a.id)\n  // updateData()\n}\n\nconst todosCheck = ({id}) =&gt; {\n  todos = todos.map(todo =&gt; todo[&#39;id&#39;] === +id ? {...todo,...{completed: !todo.completed}} : {...todo});\n}\nconst filterActiveCheck = () =&gt; {\n  todos = todos.filter(todo =&gt; todo.completed === false);\n  render();\n}\nconst filterCompletedCheck = () =&gt; {\n  todos = todos.filter(todo =&gt; todo.completed === true);\n  render();\n}\nconst deleteTodo = ({id}) =&gt; {\n  todos= todos.filter(todo =&gt; todo.id !== +id );\n  updateData()\n}\n\n\nwindow.addEventListener(&#39;DOMContentLoaded&#39;, () =&gt;{\n  todos = fetchTodos();\n  sortTodo();\n  data = [...todos];\n  console.log(data);\n  render();\n})\n\n\n$input.onkeyup = e =&gt; {\n  if( e.key !==&#39;Enter&#39; || $input.value ===&#39;&#39;) return;\n  addTodo(e.target.value);\n  $input.value =&#39;&#39;;\n  render();\n}\n\n$todos.onchange = e =&gt;{\n  if(!e.target.matches(&#39;li &gt; input&#39;)) return;\n  const $checkParent = e.target.parentNode;\n  todosCheck($checkParent);\n  updateData();\n  const $curFilter = document.querySelector(&#39;.nav .active&#39;);\n  if($curFilter.matches(&#39;#active&#39;)){\n    filterActiveCheck();\n  }\n  if($curFilter.matches(&#39;#completed&#39;)){\n    filterCompletedCheck();\n  }\n  render();\n}\n$todos.onclick = e =&gt; {\n  if(!e.target.matches(&#39;.remove-todo&#39;)) return;\n  const $buttonParent = e.target.parentNode;\n  deleteTodo($buttonParent);\n  $todos.removeChild($buttonParent);\n}\n\n$filter.onclick = e =&gt; {\n  if(!e.target.matches(&#39;li&#39;)) return;\n  [...$filter.children].forEach(item =&gt; {\n    item.classList.toggle(&#39;active&#39;,e.target === item);\n  })\n  // let data = todos;\n  if(e.target.matches(&#39;#all&#39;)){\n    todos = data;\n    render();\n    updateData()\n  }\n\n  if(e.target.matches(&#39;#active&#39;)){\n    todos = data.filter(todo =&gt; {\n      return todo.completed === false;\n    });\n\n    render();\n    updateData()\n    // todos = data;\n  }\n  if(e.target.matches(&#39;#completed&#39;)){\n    todos = data.filter(todo =&gt; {\n      return todo.completed ===true;\n    })\n\n    render();\n    updateData()\n    // todos = data;\n  }\n}\n\n$clear.onclick = e =&gt; {\n  if(!e.target.matches(&#39;.btn&#39;)) return;\n  todos = todos.map(todo =&gt; {\n    return {...todo, ...{completed : false}};\n  })\n\n  render();\n  updateData();\n}\n$completeAll.onchange = e =&gt; {\n  if(e.target.checked){\n    todos= todos.map(todo =&gt; {\n    return{...todo, ...{completed : true}};\n    })\n    updateData()\n  }\n  if(!e.target.checked){\n    todos= todos.map(todo =&gt; {\n    return{...todo, ...{completed : false}};\n    })\n    updateData()\n  }\n  const $curFilter = document.querySelector(&#39;.nav .active&#39;);\n  if($curFilter.matches(&#39;#active&#39;)){\n    filterActiveCheck();\n  }\n  if($curFilter.matches(&#39;#completed&#39;)){\n    filterCompletedCheck();\n  }\n  render();\n}</code></pre></div>","frontmatter":{"title":"javascript newTodoList","date":"November 02, 2020"}}},"pageContext":{"slug":"/javascript/javascript-newTodoList/","previous":{"fields":{"slug":"/javascript/javascript-TodoList/"},"frontmatter":{"title":"javascript TodoList","category":"javascript","draft":false}},"next":{"fields":{"slug":"/javascript/javascript-restAPI-TodoList/"},"frontmatter":{"title":"javascript restAPI&TodoList","category":"javascript","draft":false}}}},"staticQueryHashes":["2486386679","3128451518"]}