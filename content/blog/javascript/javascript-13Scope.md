---
title: javascript 13Scope
date: 2020-09-16 09:39:57
category: "javascript"
draft: false
---

# 스코프

## 1. 스코프란?

**스코프 이해의 중요성**

스코프(scope, 유효범위는) 자바스크립트를 포함한 모든 프로그래밍 언어의 기본적이고 중요한 개념이다. 자바스크립트의 스코프는 다른언어의 스코프와 구별되는 특징이 있어서 주의해야 한다. var 키워드로 선언한 변수와 let, const로 선언한 변수의 스코프도 다르게 동작한다. 스코프는 변수, 함수와 깊은 관련이 있다.

**스코프는 식별자가 유효한 범위이다.**

우리는 스코프를 이미 경험했다. 바로 함수의 매개변수이다. 함수의 매개변수는 함수 몸체 내에서만 참조할 수 있고, 외부에서는 참조할 수 없다. 이것은 매개변수를 참조할 수 있는 유효범위, 즉 매개변수의 스코프가 함수 몸체 내부로 한정되기 때문이다.

매개변수의 스코프 예제

```
function show(input) {
	console.log(input);
}

show("hi"); //hi

console.log(input); // ReferenceError: input is not defined
```

변수는 전역 뿐만 아니라 함수 몸체 내에서 선언할 수 있다. 또한 코드블록이나 함수는 중첩 가능하다.

스코프 별 변수 선언

```
var num1 = 1;

if(1) {
	var num2 = 2;
	if(1) {
		var num3 = 3;
	}
}

function foo() {
	var num4 = 4;

	function bar() {
		var num5 = 5;
	}
}

console.log(num1,num2,num3); //1 2 3
console.log(num4); // ReferenceError: num4 is not defined
console.log(num5); // ReferenceError: num5 is not defined
```

변수는 선언된 위치에 따라 유효한 범위(다른 코드가 변수를 참조할 수 있는 범위)가 정해진다. 변수뿐만 아니라 모든 식별자가 마찬가지이다.

모든 식별자는 선언된 위치에 의해 다른 코드가 식별자 자신을 참조할 수 있있는 유효범위가 있다. 그 유효범위를 스코프라고 한다.

**스코프는 식별자를 검색할 때 사용하는 규칙이다**

다른 위치에 동일한 이름의 변수 선언 예제

```
var x = 'global';

function foo() {
	var x = 'local';
	console.log(x); // local
}

foo();

console.log(x); // global
```

전역과 함수 몸체 내부에 같은 이름의 변수 x 를 선언하였다. 자바스크립트엔진은 이름같은 두개의 변수 중에서 어떤 변수를 참조 할것인지를 결정한다. 이를 식별자 결정(identifier resolution)이라고 한다. 자바스크립트 엔진은 스코프를 통해 어떤 변수를 참조할 것인지를 결정하기 때문에 스코프를 '식별자를 검색할 때 사용하는 규칙' 이라고 할 수 있다.

**스코프가 다르면 별개의 변수이다.**

자바스크립트 엔진은 코드를 실행할 때 코드의 문맥을 고려한다. 즉, 코드의 위치를 고려하기 때문에 위 예제와 같이 동일한 이름의 변수 x 도 다른 결과를 만들어 낸다.

```
코드의 문맥(context)와 환경(environment)
코드가 어디서 실행되며 주변에 어떤 코드가 있는지를 렉시컬 환경(lexical environment)라고 부른다. 코드의 문맥은 렉시컬 환경으로 이루어지며, 실행컨텍스트(execution context)로 구현된다.
```

전역에서 선언된 변수 x 와 함수 내부에서 선언된 변수 x 는 식별자 이름이 동일하지만 스코프가 다른 별개의 변수이다.

**스코프는 네임 스페이스(이름으로 개체를 구별하는 공간)이다**

스코프라는 개념이 없다면 같은 이름을 갖는 변수는 충돌을 일으키기 띠ㅐ문에 프로그램 전체에서 하나만 사용해야된다.

식별자는 어떤 값을 구별하여 식별해낼 수 있는 고유한 이름을 말한다. 그렇기 때문에 유일(unique)해야 한다. 즉 중복되면 안된다는 뜻이다. 하나의 값은 유일한 식별자에 연결 (name binding)되어야 한다.

서로다른 스코프에서는 같은 이름의 식별자를 사용할 수 있다.

우리는 컴퓨터를 사용할 때 하나의 파일 이름만 사용하지 않는다. 폴더라는 개념이 존재하기 때문이다. 폴더가 있기 때문에 서로 다른 폴더에서 같은 이름의 파일을 만들 수 있다.

**var 키워드의 문제점**

var 키워드는 같은 스코프내에서 중복 선언이 허용된다. 의도치 않게 변수값이 재할당되는 부작용을 발생시킬 수 있다.

```
var x = 1;
//두번째 선언문은 var 키워드가 없는 것 처럼 동작한다.
var x = 2;


console.log(x);//2

```

**let이나 const를 사용하자**

let, const 키워드로 선언된 변수는 같은 스코프 내에서 중복 선언을 허용하지 않는다.

```
let x = 1;
let x = 2; // SyntaxError: Identifier 'x' has already been declared
```

## 렉시컬 스코프

lexical를 한국어로 번역해보면 어휘적인 이라는 뜻이다. 즉 문맥을 본다는 것으로 이해하면 된다.

렉시컬 스코프는 클로저를 이해하기도하는 시작점이기도 하다.

정적스코프라고도 부르고 , 상위 스코프를 어떻게 결정하는 지에 대한 문법이다. 자바스크립트는 렉시컬스코프(정적스코프)를 따른다.

동적스코프는 호출위치에 따라 상위 스코프를 따르는 것이다.
